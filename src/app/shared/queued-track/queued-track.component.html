<div class="track-list-item">
	<div class="track-list-item__artwork">
		<img [src]="queuedTrack.Track?.Album?.ArtworkUrlSmall || '/assets/images/pixel.gif'">
		<button type="button"
			class="btn-icon track-list-item__artwork-play-button"
			*ngIf="!queuedTrack.Track.IsAlreadyQueued && queuedTrack.StartedPlayingDateTime"
			(click)="queueTrack()">
			<i class="icon-play"></i>
		</button>
	</div>

	<div class="track-list-item__details">
		<div>
			<label>{{queuedTrack.Track.Name}}</label>
			<ul class="comma-separated" *ngIf="queuedTrack?.Track?.Artists">
				<li *ngFor="let artist of queuedTrack.Track?.Artists">
					<a [routerLink]="['/artist', artist.MusicProvider.Identifier, artist.Link]">{{artist.Name}}</a>
				</li>
			</ul>
			<a *ngIf="queuedTrack?.Track?.Album" [routerLink]="['/album', queuedTrack?.Track?.Album.MusicProvider.Identifier, queuedTrack?.Track?.Album.Link]">{{queuedTrack?.Track?.Album?.Name}}</a><br>
		</div>

		<div class="queue-info">
			Queued by <span *ngIf="!queuedTrack.url">{{queuedTrack.fullName | async}}</span> <a [href]="queuedTrack.url" class="user-link dark top" target="_blank" *ngIf="queuedTrack.url">{{queuedTrack.fullName | async}}<img [src]="queuedTrack?.userPhotoUrl"></a>
			<span *ngIf="queuedTrack.Reason"> text: {{queuedTrack.Reason}}</span>
			<span *ngIf="queuedTrack.StartedPlayingDateTime">, played at {{queuedTrack.StartedPlayingDateTime | date: 'HH:mm'}} on {{queuedTrack.StartedPlayingDateTime | date}}</span>

			<div>
				<div class="badge badge-like user-list-container">
					{{queuedTrack.LikeCount}}
					<user-list title="Likes" [opinions]="queuedTrack?.Likes" *ngIf="queuedTrack?.LikeCount" position="top"></user-list>
				</div>
				<div class="badge badge-veto user-list-container">
					{{queuedTrack.VetoCount}}
					<user-list title="Vetoes" [opinions]="queuedTrack?.Vetoes" *ngIf="queuedTrack?.VetoCount" position="top"></user-list>
				</div>
			</div>
		</div>
	</div>

	<div class="track-list-item__options">
		<queue-track-button [track]="queuedTrack.Track"
			[queuedTrack]="queuedTrack"
			(likeTrack)="like()" 
			(vetoTrack)="veto()"></queue-track-button>
	</div>
</div>